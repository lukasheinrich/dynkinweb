<html>
	<head>
    <meta charset="UTF-8">
  	<script src="node_modules/d3/d3.js" charset="utf-8"></script>
    <script src="node_modules/underscore/underscore.js" charset="utf-8"></script>
    <script src="js/numeric-1.2.6.min.js" charset="utf-8"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <style type="text/css" media="screen">
    body{
      background-color:#eee;
      margin:auto; 
      color:#111;
      font-family:Helvetica;
    }
    .coord{
      fill:#eee;
    }
    .root{
      fill:none;
      stroke:steelblue;
      stroke-width:3;
    }
    .rootarrow{
      stroke-width:1;
      stroke:steelblue;
    }
    .fundamental{
      fill:#777;
    }
    .fundarrow{
      stroke-width:1;
      stroke:#777;
    }
    #content{
      opacity:.75;
      height:100%;
      background-color:#eee;
      margin:auto;      
      position:fixed;
      overflow:scroll;
    }
    #content{
      padding:2em;
      width:300px;
    }
    #canvasbox{
/*      overflow:hidden;*/
      height:100%;
    }
    .dynkin{
      background-color:#eee;
    }
    </style>
    <title>Lie Algebras of Rank 2</title>
	</head>
	<body>
    <div id="content">
    <h1>Lattices of Rank 2 Lie Algebras</h1>
    <p>
      Select Dynkin Diagram.
    <form>
    <input type="radio" name="lie" onclick="drawlattices(1*Math.PI/2,Math.sqrt(1));">    
    <span style="display:inline-block;">
      <img alt="Dyn-node n1.png" src="http://upload.wikimedia.org/wikipedia/commons/0/0a/Dyn-node_n1.png" width="9" height="24" data-file-width="9" data-file-height="24">
      <img alt="Dyn-2.png" src="http://upload.wikimedia.org/wikipedia/commons/9/9a/Dyn-2.png" width="6" height="24" data-file-width="6" data-file-height="24">
      <img alt="Dyn-node n2.png" src="http://upload.wikimedia.org/wikipedia/commons/b/b8/Dyn-node_n2.png" width="9" height="24" data-file-width="9" data-file-height="24">
    </span> ùñòùî¨‚ÇÑ
    
    <input type="radio" name="lie" onclick="drawlattices(2*Math.PI/3,Math.sqrt(1));">
    <span style="display:inline-block;">
      <img alt="Dyn-node n1.png" src="http://upload.wikimedia.org/wikipedia/commons/0/0a/Dyn-node_n1.png" width="9" height="24" data-file-width="9" data-file-height="24">
      <img alt="Dyn-3.png" src="http://upload.wikimedia.org/wikipedia/commons/b/b3/Dyn-3.png" width="6" height="24" data-file-width="6" data-file-height="24">
      <img alt="Dyn-node n2.png" src="http://upload.wikimedia.org/wikipedia/commons/b/b8/Dyn-node_n2.png" width="9" height="24" data-file-width="9" data-file-height="24">
    </span> ùñòùî©‚ÇÉ
    
    <br/>
    
    <input type="radio" name="lie" onclick="drawlattices(3*Math.PI/4,Math.sqrt(2));">
    <span style="display:inline-block;">
      <img alt="Dyn-node n1.png" src="http://upload.wikimedia.org/wikipedia/commons/0/0a/Dyn-node_n1.png" width="9" height="24" data-file-width="9" data-file-height="24">
      <img alt="Dyn-4b.png" src="http://upload.wikimedia.org/wikipedia/commons/c/c9/Dyn-4b.png" width="8" height="24" data-file-width="8" data-file-height="24">
      <img alt="Dyn-node n2.png" src="http://upload.wikimedia.org/wikipedia/commons/b/b8/Dyn-node_n2.png" width="9" height="24" data-file-width="9" data-file-height="24">
    </span> ùñòùî≠‚ÇÑ

    <input type="radio" name="lie" onclick="drawlattices(5*Math.PI/6,Math.sqrt(3));">
    <span style="display:inline-block;" class="dynkin">
      <img alt="Dyn-node n1.png" src="http://upload.wikimedia.org/wikipedia/commons/0/0a/Dyn-node_n1.png" width="9" height="24" data-file-width="9" data-file-height="24">
      <img alt="Dyn-6a.png" src="http://upload.wikimedia.org/wikipedia/commons/6/6d/Dyn-6a.png" width="9" height="24" data-file-width="9" data-file-height="24">
      <img alt="Dyn-node n2.png" src="http://upload.wikimedia.org/wikipedia/commons/b/b8/Dyn-node_n2.png" width="9" height="24" data-file-width="9" data-file-height="24">
    </span> ùî§‚ÇÇ
    </form>
  </p>      
  <p>
    This small demo will draw the fundamental weight lattice as well as the root lattice of the semi-simple Lie algebra associated to the selected Dynkin diagram.
  </p>
  <p>    
    Legend:
    <div>
    <svg width=20 height=20><circle cx=10 cy=10 r=2 class="fundamental"></circle></svg> fundamental weight
    <br/>
    <svg width=20 height=20><circle cx=10 cy=10 r=5 class="root"></circle></svg> root lattice point
    </div>
  </p>
  <p>
    Various things can be deduced by eye. The index of the root lattice as a sublattice of the fundamental lattice is the center of the universally covering group with that Lie Algebra.
    For G2, for example, we see that the group is centerless. For Spin(4) which has so4 Lie algebra, the center is ‚Ñ§‚ÇÇ√ó‚Ñ§‚ÇÇ
  </p>
  </p>
    All Groups with the same Lie algebra are constructed as quotients of the universal cover by some central subgroup.  
  <p>    


    </div>
    <div id="canvasbox">
    <svg id="canvas" width=1500 height=1000>
    </svg>      
    </div>
    <script type="text/javascript" charset="utf-8">

    var canvas = d3.selectAll('#canvas')

    var pxwidth   = 1500
    var pxheight   = 1000

    var physwidth = 10
    var physheight = physwidth/pxwidth*pxheight

    var xscale = d3.scale.linear().domain([-physwidth/2,physwidth/2]).range([0,pxwidth]);
    var yscale = d3.scale.linear().domain([-physheight/2,physheight/2]).range([pxheight,0]);
        
    var gridcoords = _.range(-10,10).map(function(x){return _.range(-10,10).map(function(y){return [x,y]})})
    var gridcoords = _.flatten(gridcoords,true)
    
    var circles = canvas.selectAll('circle').data(gridcoords).enter().append('circle')
    circles.attr('cx',function(d){return xscale(d[0])})
           .attr('cy',function(d){return yscale(d[1])})
           .attr('r',1)
           .attr('class','coord')           

     simplerootangles = [0,120]

     function rotate(angle){
       return [[Math.cos(angle),-Math.sin(angle)],[Math.sin(angle),Math.cos(angle)]];
     }

     // angle = 3*Math.PI/4
     // scale = Math.sqrt(2)
     function drawlattices(angle,scale){
       d3.select("#canvas").selectAll('*').remove();
       a1 = [1,0]
       a2 = numeric.mul(scale,numeric.dot(rotate(angle),a1))
     

       simpleroots = [a1,a2]
       var cartanmatrix = _.range(2).map(function(i){return _.range(2).map(function(j){
         return 2*numeric.dot(simpleroots[i],simpleroots[j])/numeric.dot(simpleroots[j],simpleroots[j]);
       })})

       fundamentalroots = numeric.dot(numeric.inv(cartanmatrix),simpleroots)

       var rootgrid = _.range(-10,10).map(function(i){return _.range(-10,10).map(function(j){
         return numeric.add(numeric.mul(i,a1),numeric.mul(j,a2))
       })})
       rootgrid = _.flatten(rootgrid,true)

       var fundamentalgrid = _.range(-10,10).map(function(i){return _.range(-10,10).map(function(j){
         return numeric.add(numeric.mul(i,fundamentalroots[0]),numeric.mul(j,fundamentalroots[1]))
       })})
       fundamentalgrid = _.flatten(fundamentalgrid,true)
     
        var fundamentalmarker = canvas.selectAll('.fundamental').data(fundamentalgrid).enter().append('circle')
        fundamentalmarker.attr('cx',function(d){return xscale(d[0])})
               .attr('cy',function(d){return yscale(d[1])})
               .attr('r',2)
               .attr('class','fundamental')
               
        var rootsmarker = canvas.selectAll('.root').data(rootgrid).enter().append('circle')
        rootsmarker.attr('cx',function(d){return xscale(d[0])})
              .attr('cy',function(d){return yscale(d[1])})
              .attr('r',5)
              .attr('class','root');

        var rootarrows = canvas.selectAll('.rootarrow').data(simpleroots).enter().append('line')
        .attr('x1',xscale(0)).attr('y1',yscale(0))
        .attr('x2',function(d){return xscale(d[0])}).attr('y2',function(d){return yscale(d[1])})
        .attr('class','rootarrow')

        var rootarrows = canvas.selectAll('.fundarrow').data(fundamentalroots).enter().append('line')
        .attr('x1',xscale(0)).attr('y1',yscale(0))
        .attr('x2',function(d){return xscale(d[0])}).attr('y2',function(d){return yscale(d[1])})
        .attr('class','fundarrow')

    }
    </script>
  </body>
</html>